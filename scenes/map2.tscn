[gd_scene load_steps=22 format=2]

[ext_resource path="res://scenes/checkpoint.tscn" type="PackedScene" id=1]
[ext_resource path="res://addons/zylann.hterrain/hterrain_texture_set.gd" type="Script" id=2]
[ext_resource path="res://scenes/snowman.tscn" type="PackedScene" id=3]
[ext_resource path="res://scenes/tree1.tscn" type="PackedScene" id=4]
[ext_resource path="res://scenes/rock1.tscn" type="PackedScene" id=5]
[ext_resource path="res://scenes/finish.tscn" type="PackedScene" id=6]
[ext_resource path="res://addons/zylann.hterrain/hterrain.gd" type="Script" id=7]
[ext_resource path="res://scenes/pickup.tscn" type="PackedScene" id=8]
[ext_resource path="res://scenes/pickups.tscn" type="PackedScene" id=9]
[ext_resource path="res://scenes/barrel.tscn" type="PackedScene" id=10]
[ext_resource path="res://scenes/cone.tscn" type="PackedScene" id=11]
[ext_resource path="res://scenes/fance.tscn" type="PackedScene" id=12]
[ext_resource path="res://hterrain_data/data.hterrain" type="Resource" id=13]
[ext_resource path="res://scenes/road.tscn" type="PackedScene" id=16]

[sub_resource type="BoxShape" id=1]
extents = Vector3( 175.615, 17.3229, 7.0359 )

[sub_resource type="BoxShape" id=2]
extents = Vector3( 241.819, 17.3229, 7.0359 )

[sub_resource type="BoxShape" id=3]
extents = Vector3( 246.307, 17.3229, 7.0359 )

[sub_resource type="GDScript" id=6]
script/source = "extends StaticBody


func _on_area_body_entered(body):
	if body.owner == null or not body.owner is Character:
		return
		
	if body.owner.is_in_group(\"Characters\"):
		$collision_shape.disabled = true
		$area/collision_shape.disabled = true
		$particles.emitting = true
"

[sub_resource type="GDScript" id=7]
script/source = "extends StaticBody


func _on_area_body_entered(body):
	if body.owner == null or not body.owner is Character:
		return
		
	if body.owner.is_in_group(\"Characters\"):
		$collision_shape.disabled = true
		$area/collision_shape.disabled = true
		$particles.emitting = true
"

[sub_resource type="Curve3D" id=4]
_data = {
"points": PoolVector3Array( 0, 0, 0, 0, 0, 0, -16.553, 1.1673, -56.9881, 0, 0, 0, 0, 0, 0, -47.7952, 1.1673, -105.093, 0, 0, 0, 0, 0, 0, -78.904, 1.1673, -74.8248, 0, 0, 0, 0, 0, 0, -82.6875, 1.16731, -26.9005, 0, 0, 0, 0, 0, 0, -62.4442, 1.08023, 22.3, 0, 0, 0, 0, 0, 0, -61.1974, 0.77124, 57.838, 0, 0, 0, 0, 0, 0, -86.2048, 0.385132, 86.7682, 0, 0, 0, 0, 0, 0, -121.774, 1.16731, 27.4621, 0, 0, 0, 0, 0, 0, -131.349, 1.1673, -80.2812, 0, 0, 0, 0, 0, 0, -81.3345, 1.1673, -150.4, 0, 0, 0, 0, 0, 0, -25.4356, 1.1673, -151.871, 0, 0, 0, 0, 0, 0, 44.6832, 1.1673, -32.7181, 0, 0, 0, 0, 0, 0, 54.5842, 1.1673, 35.7606, 0, 0, 0, 0, 0, 0, 105.031, 1.1673, 38.7033, 0, 0, 0, 0, 0, 0, 76.0113, 1.1673, -118.296, 0, 0, 0, 0, 0, 0, 108.374, 1.1673, -184.492, 0, 0, 0, 0, 0, 0, 170.647, 1.1673, -152.619, 0, 0, 0, 0, 0, 0, 147.111, 1.1673, 54.795, 0, 0, 0, 0, 0, 0, 126.253, 1.16733, 133.967, 0, 0, 0, 0, 0, 0, 154.232, 1.16733, 213.906, 0, 0, 0, 0, 0, 0, 110.266, 1.16733, 243.483, 0, 0, 0, 0, 0, 0, 23.532, 1.16733, 228.295, 0, 0, 0, 0, 0, 0, -121.557, 1.16733, 242.684, 0, 0, 0, 0, 0, 0, -157.53, 1.16733, 186.327, 0, 0, 0, 0, 0, 0, -120.358, 1.16733, 134.366, 0, 0, 0, 0, 0, 0, 17.5366, 1.16733, 139.163, 0, 0, 0, 0, 0, 0, -11.4732, 1.1673, -45.4921, 0, 0, 0, 0, 0, 0, -16.553, 1.1673, -56.9881 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 )
}

[sub_resource type="Resource" id=5]
script = ExtResource( 2 )
mode = 0
textures = [ [  ], [  ] ]

[node name="map2" type="Spatial"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -31.1981, 0, 0 )

[node name="lights" type="Node" parent="."]

[node name="sun" type="DirectionalLight" parent="lights"]
transform = Transform( 0.866025, -0.286788, -0.409576, 0, -0.819152, 0.573577, -0.5, -0.496732, -0.709406, 0, 76, 0 )
shadow_enabled = true

[node name="finish_2" parent="." instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 217.717, 0.167786, 229.458 )

[node name="borders" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 218.224, 0, 200.767 )

[node name="collision_shape" type="CollisionShape" parent="borders"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.3795, -180.345 )
shape = SubResource( 1 )

[node name="collision_shape_2" type="CollisionShape" parent="borders"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.3795, 305.845 )
shape = SubResource( 1 )

[node name="collision_shape_3" type="CollisionShape" parent="borders"]
transform = Transform( -0.00258305, 0, 0.999997, 0, 1, 0, -0.999997, 0, -0.00258305, -171.535, 14.3795, 87.9943 )
shape = SubResource( 2 )

[node name="collision_shape_4" type="CollisionShape" parent="borders"]
transform = Transform( -0.00258305, 0, 0.999997, 0, 1, 0, -0.999997, 0, -0.00258305, 179.991, 14.3795, 79.2051 )
shape = SubResource( 3 )

[node name="trees" type="Spatial" parent="."]

[node name="tree1" parent="trees" instance=ExtResource( 4 )]

[node name="rocks" type="Spatial" parent="."]

[node name="rock1" parent="rocks" instance=ExtResource( 5 )]

[node name="checkpoints" type="Spatial" parent="."]

[node name="checkpoint_0" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( 0.999763, 0, -0.0217626, 0, 1, 0, 0.0217626, 0, 0.999763, 136.298, 0, 200.913 )

[node name="checkpoint_1" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.247101, 0, -0.96899, 0, 1, 0, 0.96899, 0, -0.247101, 128.56, 0, 307.311 )

[node name="checkpoint_2" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( 0.249636, 0, -0.96834, 0, 1, 0, 0.96834, 0, 0.249636, 135.553, 0, 82.5279 )

[node name="checkpoint_3" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( 0.983556, 0, 0.180605, 0, 1, 0, -0.180605, 0, 0.983556, 267.556, 0, 250.157 )

[node name="checkpoint_5" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.21879, 0, 0.975772, 0, 1, 0, -0.975772, 0, -0.21879, 324.559, 0, 50.2387 )

[node name="checkpoint_6" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.988869, 0, 0.148793, 0, 1, 0, -0.148793, 0, -0.988869, 362.509, 0, 283.478 )

[node name="checkpoint_7" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.335928, 0, 0.941888, 0, 1, 0, -0.941888, 0, -0.335928, 323.596, 0, 472.076 )

[node name="checkpoint_9" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( 0.186267, 0, 0.982499, 0, 1, 0, -0.982499, 0, 0.186267, 94.4601, 0, 356.789 )

[node name="pickups" parent="." instance=ExtResource( 9 )]

[node name="pickup" parent="pickups" instance=ExtResource( 8 )]

[node name="obstacles" type="Spatial" parent="."]

[node name="barrel" parent="obstacles" instance=ExtResource( 10 )]
transform = Transform( 0.645578, 0, -0.763695, 0, 1, 0, 0.763695, 0, 0.645578, 229.104, 1.04948, 307.12 )

[node name="cone" parent="obstacles" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 224.313, 0, 278.847 )

[node name="snowman" parent="obstacles" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 229.799, 0, 319.483 )

[node name="snowman_2" parent="obstacles" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 229.799, 0, 373.233 )
script = SubResource( 6 )

[node name="snowman_3" parent="obstacles" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 251.293, 0, 349.68 )
script = SubResource( 7 )

[node name="fances" type="Spatial" parent="."]

[node name="fance" parent="fances" instance=ExtResource( 12 )]

[node name="road_path" type="Path" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 215.193, 0, 229.337 )
curve = SubResource( 4 )

[node name="HTerrain" type="Spatial" parent="."]
script = ExtResource( 7 )
_terrain_data = ExtResource( 13 )
chunk_size = 32
collision_enabled = true
collision_layer = 1
collision_mask = 1
shader_type = "Classic4Lite"
custom_shader = null
custom_globalmap_shader = null
texture_set = SubResource( 5 )
shader_params/u_ground_uv_scale = 20
shader_params/u_depth_blending = true
shader_params/u_triplanar = false
shader_params/u_tile_reduction = Plane( 0, 0, 0, 0 )

[node name="road" parent="." instance=ExtResource( 16 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1.351, 219.991, 0.2, 258.841 )
