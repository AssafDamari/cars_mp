[gd_scene load_steps=21 format=2]

[ext_resource path="res://scenes/checkpoint.tscn" type="PackedScene" id=1]
[ext_resource path="res://addons/zylann.hterrain/hterrain_texture_set.gd" type="Script" id=2]
[ext_resource path="res://scenes/snowman.tscn" type="PackedScene" id=3]
[ext_resource path="res://scenes/tree1.tscn" type="PackedScene" id=4]
[ext_resource path="res://scenes/rock1.tscn" type="PackedScene" id=5]
[ext_resource path="res://scenes/finish.tscn" type="PackedScene" id=6]
[ext_resource path="res://addons/zylann.hterrain/hterrain.gd" type="Script" id=7]
[ext_resource path="res://scenes/pickup.tscn" type="PackedScene" id=8]
[ext_resource path="res://scenes/pickups.tscn" type="PackedScene" id=9]
[ext_resource path="res://scenes/barrel.tscn" type="PackedScene" id=10]
[ext_resource path="res://scenes/cone.tscn" type="PackedScene" id=11]
[ext_resource path="res://scenes/fance.tscn" type="PackedScene" id=12]
[ext_resource path="res://hterrain_data/data.hterrain" type="Resource" id=13]
[ext_resource path="res://scenes/road.tscn" type="PackedScene" id=16]

[sub_resource type="BoxShape" id=1]
extents = Vector3( 175.615, 17.3229, 7.0359 )

[sub_resource type="BoxShape" id=2]
extents = Vector3( 241.819, 17.3229, 7.0359 )

[sub_resource type="BoxShape" id=3]
extents = Vector3( 246.307, 17.3229, 7.0359 )

[sub_resource type="GDScript" id=4]
script/source = "extends StaticBody

func _ready():
	$area.connect(\"body_entered\", self, \"_on_area_body_entered\")

func _on_area_body_entered(body):
	if body.owner == null or not body.owner is Character:
		return
		
	if body.owner.is_in_group(\"Characters\"):
		$body.visible = false
		$collision_shape.disabled = true
		$area/collision_shape.disabled = true
		$particles.emitting = true
		$timer.start()


func _on_timer_timeout():
	queue_free()
"

[sub_resource type="Curve3D" id=5]
_data = {
"points": PoolVector3Array( 0, 0, 0, 0, 0, 0, -10.2374, 1.1673, -44.4998, 0, 0, 0, 0, 0, 0, -37.5627, 1.1673, -84.4367, 0, 0, 0, 0, 0, 0, -68.0351, 1.1673, -80.5193, 0, 0, 0, 0, 0, 0, -76.687, 1.1673, -26.1356, 0, 0, 0, 0, 0, 0, -62.4442, 1.08023, 22.3, 0, 0, 0, 0, 0, 0, -58.7651, 0.77124, 68.4178, 0, 0, 0, 0, 0, 0, -110.677, 0.385132, 69.6538, 0, 0, 0, 0, 0, 0, -135.397, 1.1673, 13.4162, 0, 0, 0, 0, 0, 0, -128.307, 1.1673, -108.988, 0, 0, 0, 0, 0, 0, -66.5098, 1.1673, -155.651, 0, 0, 0, 0, 0, 0, -23.2097, 1.1673, -157.753, 0, 0, 0, 0, 0, 0, 21.3515, 1.1673, -104.784, 0, 0, 0, 0, 0, 0, 60.868, 1.1673, 47.3968, 0, 0, 0, 0, 0, 0, 105.031, 1.1673, 38.7033, 0, 0, 0, 0, 0, 0, 107.531, 1.1673, -53.4965, 0, 0, 0, 0, 0, 0, 89.2782, 1.1673, -157.866, 0, 0, 0, 0, 0, 0, 131.914, 1.1673, -188.441, 0, 0, 0, 0, 0, 0, 163.498, 1.1673, -26.8616, 0, 0, 0, 0, 0, 0, 126.253, 1.16733, 133.967, 0, 0, 0, 0, 0, 0, 152.972, 1.16733, 230.27, 0, 0, 0, 0, 0, 0, 74.5172, 1.16733, 241.058, 0, 0, 0, 0, 0, 0, 23.532, 1.16733, 228.295, 0, 0, 0, 0, 0, 0, -143.194, 1.16733, 222.915, 0, 0, 0, 0, 0, 0, -159.866, 1.16733, 157.209, 0, 0, 0, 0, 0, 0, -108.87, 1.16736, 146.912, 0, 0, 0, 0, 0, 0, 17.5366, 1.16733, 139.163, 0, 0, 0, 0, 0, 0, 21.6884, 1.1673, 86.6497, 0, 0, 0, 0, 0, 0, 4.07545, 1.1673, 0.130157 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 )
}

[sub_resource type="Resource" id=6]
script = ExtResource( 2 )
mode = 0
textures = [ [  ], [  ] ]

[node name="map_snow" type="Spatial"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -31.1981, 0, 0 )

[node name="lights" type="Node" parent="."]

[node name="sun" type="DirectionalLight" parent="lights"]
transform = Transform( 0.866025, -0.286788, -0.409576, 0, -0.819152, 0.573577, -0.5, -0.496732, -0.709406, 0, 76, 0 )
light_energy = 0.8

[node name="finish_2" parent="." instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 217.717, 0.167786, 229.458 )

[node name="borders" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 218.224, 0, 200.767 )

[node name="collision_shape" type="CollisionShape" parent="borders"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.3795, -180.345 )
shape = SubResource( 1 )

[node name="collision_shape_2" type="CollisionShape" parent="borders"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 14.3795, 305.845 )
shape = SubResource( 1 )

[node name="collision_shape_3" type="CollisionShape" parent="borders"]
transform = Transform( -0.00258305, 0, 0.999997, 0, 1, 0, -0.999997, 0, -0.00258305, -171.535, 14.3795, 87.9943 )
shape = SubResource( 2 )

[node name="collision_shape_4" type="CollisionShape" parent="borders"]
transform = Transform( -0.00258305, 0, 0.999997, 0, 1, 0, -0.999997, 0, -0.00258305, 179.991, 14.3795, 79.2051 )
shape = SubResource( 3 )

[node name="trees" type="Spatial" parent="."]

[node name="tree1" parent="trees" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 229.788, 0, 287.613 )

[node name="rocks" type="Spatial" parent="."]

[node name="rock1" parent="rocks" instance=ExtResource( 5 )]

[node name="checkpoints" type="Spatial" parent="."]

[node name="checkpoint_1" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.247101, 0, -0.96899, 0, 1, 0, 0.96899, 0, -0.247101, 128.56, 2.96592, 305.369 )

[node name="checkpoint_2" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( 0.913311, 0, -0.407263, 0, 1, 0, 0.407263, 0, 0.913311, 95.4019, 0, 111.942 )

[node name="checkpoint_5" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.21879, 0, 0.975772, 0, 1, 0, -0.975772, 0, -0.21879, 326.189, 0, 57.5078 )

[node name="checkpoint_7" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.0092496, 0, 0.999957, 0, 1, 0, -0.999957, 0, -0.0092496, 294.867, 0, 467.389 )

[node name="checkpoint_9" parent="checkpoints" instance=ExtResource( 1 )]
transform = Transform( -0.963835, 0, -0.266498, 0, 1, 0, 0.266498, 0, -0.963835, 59.1127, 0, 415.564 )

[node name="pickups" parent="." instance=ExtResource( 9 )]

[node name="pickup" parent="pickups" instance=ExtResource( 8 )]

[node name="obstacles" type="Spatial" parent="."]

[node name="barrel" parent="obstacles" instance=ExtResource( 10 )]
transform = Transform( 0.645578, 0, -0.763695, 0, 1, 0, 0.763695, 0, 0.645578, 240.629, 1.04948, 307.12 )

[node name="cone" parent="obstacles" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 224.313, 0.208507, 278.847 )
script = SubResource( 4 )

[node name="snowman" parent="obstacles" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 229.799, 0, 319.483 )

[node name="fances" type="Spatial" parent="."]

[node name="fance" parent="fances" instance=ExtResource( 12 )]

[node name="road_path" type="Path" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 215.193, 0, 229.337 )
curve = SubResource( 5 )

[node name="HTerrain" type="Spatial" parent="."]
script = ExtResource( 7 )
_terrain_data = ExtResource( 13 )
chunk_size = 32
collision_enabled = true
collision_layer = 1
collision_mask = 1
shader_type = "Classic4Lite"
custom_shader = null
custom_globalmap_shader = null
texture_set = SubResource( 6 )
shader_params/u_ground_uv_scale = 20
shader_params/u_depth_blending = true
shader_params/u_triplanar = false
shader_params/u_tile_reduction = Plane( 0, 0, 0, 0 )

[node name="road" parent="." instance=ExtResource( 16 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1.351, 219.991, 0.2, 258.841 )
